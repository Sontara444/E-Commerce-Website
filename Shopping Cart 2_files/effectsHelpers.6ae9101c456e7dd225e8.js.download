(window.webpackJsonp=window.webpackJsonp||[]).push([[37,62],{726:function(t,e,o){"use strict";o.d(e,"h",(function(){return r})),o.d(e,"e",(function(){return l})),o.d(e,"c",(function(){return d})),o.d(e,"f",(function(){return y})),o.d(e,"d",(function(){return j})),o.d(e,"g",(function(){return k})),o.d(e,"b",(function(){return h})),o.d(e,"a",(function(){return f}));const n="I8_Recents",r={recents:[]};function c(t){const e=localStorage.getItem("I8_Tool"+t);if(e)try{return JSON.parse(e)}catch{console.warn(`Could not parse saved settings for "${t}" effect`)}return null}function l(){const t=localStorage.getItem(n);if(t)try{return void(r.recents=JSON.parse(t))}catch{console.warn("Could not parse recent settings")}r.recents=[]}function d(t,e,o){try{const{isMulticolored:l,iconSize:d}=o,f={id:t,iconSize:d,data:{}};e.forEach((t=>{const e=t.replace(/^\w/,(t=>t.toUpperCase()));if("Recolor"===e){const t=c(e)||{};l||(f.data[e]={color:t.color})}else f.data[e]=c(e)}));const h=r.recents.findIndex((e=>e.id===t));-1!==h?(r.recents.splice(h,1),r.recents.unshift(f)):(r.recents.length>5&&(r.recents.splice(-5),r.recents.unshift(f)),r.recents.length<5?r.recents.unshift(f):5===r.recents.length&&(r.recents.pop(),r.recents.unshift(f))),localStorage.setItem(n,JSON.stringify(r.recents))}catch(t){console.error("Could not save recents\n",t)}}const f={Recolor:"Recolor",Background:"Background",Padding:"Padding",Position:"Position",Rotation:"Rotation",Text:"Text",Stroke:"Stroke",Overlay:"Overlay",Shape:"Shape"},h={...f,StrokeIcon:"StrokeIcon",StrokeText:"StrokeText",StrokeOverlay:"StrokeOverlay"};function y(t,e){const o={...t.data.Stroke},n=t.iconSize/e,r=1e-5;return o.iconWidth=o.iconWidth*n+r,o.textWidth=o.textWidth*n+r,o.overlayWidth=o.overlayWidth*n+r,o}async function j(t){const{recent:e,effectKey:n,projectId:r,platform:c,iconSize:l,platforms:d}=t,{loadSettings:h}=await o(763)(`./${n.toLowerCase()}`);try{switch(n){case f.Text:{const t="https://maxst.icons8.com/vue-static/icon/effects/fonts/";await h(r,e.data[n],t);break}case f.Overlay:await h(r,e.data[n],c,d);break;case f.Stroke:await h(r,y(e,l));break;default:await h(r,e.data[n])}}catch(t){console.error(`Could not load selected recent settings for "${n}":\n`,t)}}function k(style,t){return`https://maxcdn.icons8.com/pack/iconizer/icons/${style}/${t}`}},763:function(t,e,o){var map={"./background":[722,20],"./background.js":[722,20],"./overlay":[717,17],"./overlay.js":[717,17],"./padding":[721,21],"./padding.js":[721,21],"./position":[720,22],"./position.js":[720,22],"./recolor":[701],"./recolor.js":[701],"./rotation":[719,23],"./rotation.js":[719,23],"./shape":[716,19],"./shape.js":[716,19],"./stroke":[697,24],"./stroke.js":[697,24],"./text":[718,18],"./text.js":[718,18]};function n(t){if(!o.o(map,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=map[t],n=e[0];return Promise.all(e.slice(1).map(o.e)).then((function(){return o(n)}))}n.keys=function(){return Object.keys(map)},n.id=763,t.exports=n},764:function(t,e){},765:function(t,e){},775:function(t,e,o){"use strict";o.r(e),o.d(e,"projectHasActiveEffects",(function(){return d})),o.d(e,"updateRecents",(function(){return f})),o.d(e,"brightnessByColor",(function(){return h})),o.d(e,"recolorMonochromeIcon",(function(){return y})),o.d(e,"recolorNolanIcon",(function(){return j})),o.d(e,"toLowerHex6",(function(){return k})),o.d(e,"isNotRecolored",(function(){return O})),o.d(e,"isRecoloredByGradient",(function(){return v}));var n=o(690),r=o(701),c=o(823),l=o(726);function d(t,e){if(void 0===e&&(e={gradient:void 0,color:void 0}),!t)return!1;const o=Object(n.getProject)(t).effects,r=Object.keys(o).filter((t=>o[t].active));if(!r.length)return!1;if(1===r.length&&"recolor"===r[0]){const t=o.recolor.controls.palette,n=Object.keys(t);if(1===n.length){if(e.color&&k(t[n[0]].color)===k(e.color))return!1}else if(e.gradient){if(v(t,e.gradient))return!1}}return!0}function f(t,e){const o=Object(n.getProject)(t);if(!o)return;o.effects.recolor||Object(r.init)(t);const c=o.effects.recolor.controls.palette,d=Object.keys(c).length>1,f=Object.keys(o.effects).filter((t=>{if("stroke"===t){const e=o.effects[t],n=o.effects.overlay&&e.overlay.width,r=o.effects.text&&e.text.width;return e.active&&(e.icon.width||r||n)}return o.effects[t].active}));if(f.length){const o={isMulticolored:d,iconSize:e};Object(l.c)(t,f,o)}}function h(t){const e=t.startsWith("#"),o=t.startsWith("rgb");let n,g,b;if(e){const e=7===t.length,o=t.slice(1).match(e?/(\S{2})/g:/(\S{1})/g);o&&(n=parseInt(o[0]+(e?"":o[0]),16),g=parseInt(o[1]+(e?"":o[1]),16),b=parseInt(o[2]+(e?"":o[2]),16))}if(o){const e=t.match(/(\d+){3}/g);e&&(n=e[0],g=e[1],b=e[2])}if(void 0!==n)return(299*n+587*g+114*b)/1e3/255}function y(t,e){if(!e||!t)return console.error("Incorrect arguments in recolorMonochromeIcon"),!1;try{const o=Object(n.getProject)(t);o.effects.recolor||Object(r.init)(t);const c=o.effects.recolor.controls.palette;if(1===Object.keys(c).length){const o=Object.keys(c)[0];return Object(r.recolorPalette)(t,o,e),Object(r.recolorNodes)(t,o,e),!0}return!1}catch(t){return console.error(t),!1}}function j(t,e){if(!t||!e.start||!e.end)return console.error("Incorrect arguments in recolorNolanIcon"),!1;try{const o=Object(n.getProject)(t);o.effects.recolor||Object(r.init)(t);const l=o.effects.recolor.controls.palette,d=o.effects.recolor.nodes,f=[];for(const t in l){const e=d[t][0].index;if("number"==typeof e){const o=l[t].initColor;f.push({color:o,stopIndex:e,lightness:h(o),key:t})}}f.sort(((a,b)=>a.lightness-b.lightness));const y=(e,o)=>{Object(r.recolorPalette)(t,e,o),Object(r.recolorNodes)(t,e,o)};for(let i=0;i<f.length;i++)i<2?0===f[i].stopIndex?y(f[i].key,e.start):1===f[i].stopIndex&&y(f[i].key,e.end):(e.additional||(e.additional={start:Object(c.a)(22,e.start).hex,end:Object(c.a)(22,e.end).hex}),0===f[i].stopIndex?y(f[i].key,e.additional.start):1===f[i].stopIndex&&y(f[i].key,e.additional.end));return!0}catch(t){return console.error(t),!1}}function k(t){return t.length>7&&t.endsWith("FF")?t.toLowerCase().slice(0,-2):t.toLowerCase()}function O(t){return!Object.keys(t).some((e=>!(k(t[e].color)===t[e].initColor)))}function v(t,e){var o,n;if(!e||!e.start||!e.end)return console.error("Incorrect arguments in isRecoloredByGradient"),!1;const r=[e.start.toLowerCase(),e.end.toLowerCase(),null===(o=e.additional)||void 0===o?void 0:o.start.toLowerCase(),null===(n=e.additional)||void 0===n?void 0:n.end.toLowerCase()];return!Object.keys(t).some((e=>{const o=k(t[e].color);return!r.includes(o)}))}}}]);
//# sourceMappingURL=effectsHelpers.6ae9101c456e7dd225e8.js.map